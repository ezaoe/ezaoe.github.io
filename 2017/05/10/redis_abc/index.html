<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>redis入门 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="前言Redis 是一个开源（BSD许可）的，内存中的数据结构存储系统，它可以用作数据库、缓存和消息中间件。 它支持多种类型的数据结构，如 字符串（strings） 散列（hashes）， 列表（lists）， 集合（sets）， 有序集合（sorted sets） 与范围查询， bitmaps， hyperloglogs 和地理空间（geospatial） 索引半径查询。 Redis 内置了 复制">
<meta property="og:type" content="article">
<meta property="og:title" content="redis入门">
<meta property="og:url" content="http://example.com/2017/05/10/redis_abc/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="前言Redis 是一个开源（BSD许可）的，内存中的数据结构存储系统，它可以用作数据库、缓存和消息中间件。 它支持多种类型的数据结构，如 字符串（strings） 散列（hashes）， 列表（lists）， 集合（sets）， 有序集合（sorted sets） 与范围查询， bitmaps， hyperloglogs 和地理空间（geospatial） 索引半径查询。 Redis 内置了 复制">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2017-05-10T07:19:24.000Z">
<meta property="article:modified_time" content="2019-11-01T08:07:12.538Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="redis">
<meta property="article:tag" content="基础">
<meta property="article:tag" content="入门">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-redis_abc" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2017/05/10/redis_abc/" class="article-date">
  <time class="dt-published" datetime="2017-05-10T07:19:24.000Z" itemprop="datePublished">2017-05-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      redis入门
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>Redis 是一个开源（BSD许可）的，内存中的数据结构存储系统，它可以用作数据库、缓存和消息中间件。 它支持多种类型的数据结构，如 <code>字符串（strings）</code> <code>散列（hashes）</code>， <code>列表（lists）</code>， <code>集合（sets）</code>， <code>有序集合（sorted sets）</code> 与范围查询， <code>bitmaps</code>， <code>hyperloglogs</code> 和<code>地理空间（geospatial）</code> 索引半径查询。 Redis 内置了 <code>复制（replication）</code>，<code>LUA脚本（Lua scripting）</code>， <code>LRU驱动事件（LRU eviction）</code>，<code>事务（transactions）</code> 和不同级别的 <code>磁盘持久化（persistence）</code>， 并通过 <code>Redis哨兵（Sentinel）</code>和<code>自动 分区（Cluster）</code>提供高可用性（high availability）。</p>
<span id="more"></span>

<p>[TOC]</p>
<h1 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h1><h2 id="安装redis"><a href="#安装redis" class="headerlink" title="安装redis"></a>安装redis</h2><p>centos安装redis过程如下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 下载最新稳定包，截止2017年5月最新稳定版本是Redis 3.2.8</span></span><br><span class="line">wget http://download.redis.io/releases/redis-3.2.8.tar.gz</span><br><span class="line"><span class="meta">#</span><span class="bash"> 解压gz包</span></span><br><span class="line">tar xzf redis-3.2.8.tar.gz</span><br><span class="line"><span class="meta">#</span><span class="bash"> 进入解压后的文件夹</span></span><br><span class="line">cd redis-3.2.8</span><br><span class="line"><span class="meta">#</span><span class="bash"> 编译前安装gcc tcl 此步可忽略，编译redis错误时返回再执行也可以</span></span><br><span class="line">yum install gcc</span><br><span class="line">yum install tcl</span><br><span class="line"><span class="meta">#</span><span class="bash"> 编译redis</span></span><br><span class="line">make</span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装redis，会将make编译生成的可执行文件拷贝到/usr/<span class="built_in">local</span>/bin目录下</span></span><br><span class="line">make install</span><br><span class="line"><span class="meta">#</span><span class="bash"> 测试redis，成功后显示【\o/ All tests passed without errors!】</span></span><br><span class="line">make test</span><br></pre></td></tr></table></figure>



<h2 id="配置redis"><a href="#配置redis" class="headerlink" title="配置redis"></a>配置redis</h2><p>刚刚的redis目录下会生成一个redis模板配置文件redis.conf，我们的配置可以基于此文件进行。配置过程如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 新建目录，用于存放redis的配置文件</span></span><br><span class="line">mkdir /etc/redis</span><br><span class="line"><span class="meta">#</span><span class="bash"> 新建目录，用于存放redis持久化文件</span></span><br><span class="line">mkdir -p /var/redis/6379</span><br><span class="line"><span class="meta">#</span><span class="bash"> 新建pid文件,文件内容为6379,保存退出</span></span><br><span class="line">vim /var/run/redis_6379.pid</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 拷贝源码根目录配置模板redis.conf到刚刚创建的/etc/redis文件夹下</span></span><br><span class="line">cp redis.conf /etc/redis/6379.conf</span><br><span class="line"><span class="meta">#</span><span class="bash"> 修改6379.conf文件</span></span><br><span class="line">vim /etc/redis/6379.conf</span><br></pre></td></tr></table></figure>

<p>主要配置项如下</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>daemonize</td>
<td>yes</td>
<td>设置redis以守护进程模式运行</td>
</tr>
<tr>
<td>pidfile</td>
<td>/var/run/redis_端口号.pid</td>
<td>设置redis的PID文件位置</td>
</tr>
<tr>
<td>port</td>
<td>端口号</td>
<td>设置redis监听的端口号</td>
</tr>
<tr>
<td>dir</td>
<td>/var/redis/端口号</td>
<td>设置持久化文档的存放位置</td>
</tr>
<tr>
<td>bind</td>
<td>默认127.0.0.1</td>
<td>禁用后，外网可访问，注意下面的属性</td>
</tr>
<tr>
<td>protected-mode</td>
<td>默认yes</td>
<td>禁止公网访问redis cache</td>
</tr>
<tr>
<td>requirepass</td>
<td>密码值</td>
<td>设置密码</td>
</tr>
</tbody></table>
<p><strong>注意：</strong></p>
<p>当Redis 以守护进程的方式运行的时候，Redis 默认会把 pid 文件放在/var/run/redis.pid，可配置到其他地址，当运行多个 redis 服务时，需要指定不同的 pid 文件和端口【PID (Process ID)：线程ID】</p>
<p>Redis3.2 之后加入的新特性Protected-mode 是为了禁止公网访问redis cache，加强redis安全的。它启用的条件，有两个：</p>
<ol>
<li>没有bind IP</li>
<li>没有设置访问密码</li>
</ol>
<p><strong>设置开机自动启动redis</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ./utils/install_server.sh</span> </span><br><span class="line">Welcome to the redis service installer</span><br><span class="line">This script will help you easily set up a running redis server</span><br><span class="line"></span><br><span class="line">Please select the redis port for this instance: [6379] 6379</span><br><span class="line">Please select the redis config file name [/etc/redis/6379.conf] </span><br><span class="line">Selected default - /etc/redis/6379.conf</span><br><span class="line">Please select the redis log file name [/var/log/redis_6379.log] </span><br><span class="line">Selected default - /var/log/redis_6379.log</span><br><span class="line">Please select the data directory for this instance [/var/lib/redis/6379] /var/r</span><br><span class="line">Please select the redis executable path [/usr/local/bin/redis-server] </span><br><span class="line">Selected config:</span><br><span class="line">Port           : 6379</span><br><span class="line">Config file    : /etc/redis/6379.conf</span><br><span class="line">Log file       : /var/log/redis_6379.log</span><br><span class="line">Data dir       : /var/redis/6379</span><br><span class="line">Executable     : /usr/local/bin/redis-server</span><br><span class="line">Cli Executable : /usr/local/bin/redis-cli</span><br><span class="line">Is this ok? Then press ENTER to go on or Ctrl-C to abort.</span><br><span class="line">Copied /tmp/6379.conf =&gt; /etc/init.d/redis_6379</span><br><span class="line">Installing service...</span><br><span class="line">Successfully added to chkconfig!</span><br><span class="line">Successfully added to runlevels 345!</span><br><span class="line">/var/run/redis_6379.pid exists, process is already running or crashed</span><br><span class="line">Installation successful!</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 手动开启|关闭|重启redis服务</span></span><br><span class="line">/etc/init.d/redis_6379 start|stop|restart</span><br><span class="line"><span class="meta">#</span><span class="bash"> 或者</span></span><br><span class="line">service redis_6379 start|stop|restart</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果设置了redis密码，需要在自动启动脚本位置更改一下命令，否则stop命令提示没有权限</span></span><br><span class="line">vim /etc/init.d/redis_6379</span><br><span class="line"><span class="meta">$</span><span class="bash">CLIEXEC -a <span class="string">&quot;your_password&quot;</span> -p <span class="variable">$REDISPORT</span> shutdown</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看redis是否启动</span></span><br><span class="line">ps -ef | grep redis</span><br><span class="line">root      1946     1  0 17:31 ?        00:00:00 /usr/local/bin/redis-server *:6379  </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看redis版本</span></span><br><span class="line">redis-cli -v</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 测试redis是否启动成功，有密码时用redis-cli -a 密码</span></span><br><span class="line">redis-cli</span><br><span class="line">127.0.0.1:6379&gt; PING</span><br><span class="line">PONG</span><br></pre></td></tr></table></figure>

<p>关闭开机自动启动redis</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 显示自动启动的redis设置情况</span></span><br><span class="line">chkconfig --list | grep redis</span><br><span class="line">redis_6379     	0:off	1:off	2:on	3:on	4:on	5:on	6:off</span><br><span class="line"><span class="meta">#</span><span class="bash"> 关闭或开启自动启动，后续可以开启</span></span><br><span class="line">chkconfig --level 2345 redis_6639 off|on</span><br><span class="line"><span class="meta">#</span><span class="bash"> 或者</span></span><br><span class="line">chkconfig redis_6639 off|on</span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除自动启动，后续可以用 ./utils/install_server.sh重新添加</span></span><br><span class="line">chkconfig --del redis_6639</span><br></pre></td></tr></table></figure>

<p><strong>其他常用配置</strong></p>
<p> 1、防止background save db 不成功</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">修改linux内核配置</span></span><br><span class="line">vim /etc/sysctl.conf</span><br><span class="line"><span class="meta">#</span><span class="bash"> 添加</span></span><br><span class="line">vm.overcommit_memory = 1</span><br><span class="line"><span class="meta">#</span><span class="bash"> 重启或用如下命令立即生效</span></span><br><span class="line">sysctl -p</span><br><span class="line">sysctl vm.overcommit_memory</span><br></pre></td></tr></table></figure>

<p>**解释：内核参数overcommit_memory **</p>
<p>它是 内存分配策略，可选值：0、1、2。</p>
<ul>
<li>0， 表示内核将检查是否有足够的可用内存供应用进程使用；如果有足够的可用内存，内存申请允许；否则，内存申请失败，并把错误返回给应用进程。</li>
<li>1， 表示内核允许分配所有的物理内存，而不管当前的内存状态如何。</li>
<li>2， 表示内核允许分配超过所有物理内存和交换空间总和的内存</li>
</ul>
<p><strong>2、禁用linux内核特性transparent huge pages</strong>，关闭透明大页功能</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 对内存使用和延迟有非常大的负面影响</span></span><br><span class="line">echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled</span><br><span class="line">echo never &gt; /sys/kernel/mm/redhat_transparent_hugepage/enabled</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> cat /sys/kernel/mm/redhat_transparent_hugepage/enabled</span></span><br><span class="line">always madvise [never]</span><br><span class="line"><span class="meta">#</span><span class="bash"> cat /sys/kernel/mm/transparent_hugepage/enabled</span></span><br><span class="line">always madvise [never]</span><br></pre></td></tr></table></figure>

<p>3、无需停机升级或重启 Redis 实例。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 这个命令可以看到所有可以config配置的参数</span></span><br><span class="line">127.0.0.1:6379&gt; config get *</span><br><span class="line"><span class="meta">#</span><span class="bash"> 用config <span class="built_in">set</span>设置，注意此时并不会修改你的6379.conf文件中的requirepass，重启后依旧是之前的密码</span></span><br><span class="line">config set requirepass newpass</span><br></pre></td></tr></table></figure>

<p>4、redis-cli客户端中文乱码</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-cli --raw -a password</span><br></pre></td></tr></table></figure>









<h1 id="redis基本类型"><a href="#redis基本类型" class="headerlink" title="redis基本类型"></a>redis基本类型</h1><p>Redis并不是简单的key-value存储，实际上他是一个数据结构服务器，支持不同类型的值。</p>
<ul>
<li>二进制安全的字符串</li>
<li>Lists: 按插入<strong>顺序排序</strong>的字符串元素的集合。他们基本上就是<em>链表（linked lists）</em>。</li>
<li>Sets: <strong>不重复且无序</strong>的字符串元素的集合。</li>
<li>Sorted sets,类似Sets,但是每个字符串元素都关联到一个叫<em>score</em>浮动数值（floating number value）。里面的元素总是通过score进行着排序，所以不同的是，它是可以检索的一系列元素。（例如你可能会问：给我前面10个或者后面10个元素）。</li>
<li>Hashes,由field和关联的value组成的map。field和value都是字符串的。这和Ruby、Python的hashes很像。</li>
<li>Bit arrays (或者说 simply bitmaps): 通过特殊的命令，你可以将 String 值当作一系列 bits 处理：可以设置和清除单独的 bits，数出所有设为 1 的 bits 的数量，找到最前的被设为 1 或 0 的 bit，等等。</li>
<li>HyperLogLogs: 这是被用于估计一个 set 中元素数量的概率性的数据结构。</li>
</ul>
<h2 id="命名规则"><a href="#命名规则" class="headerlink" title="命名规则"></a>命名规则</h2><p>redis的key可以用任何二进制序列，空字符串也可以，但是推荐统一风格，不过于简化也不过于复杂</p>
<blockquote>
<p>object-key : id : field</p>
<p>如：</p>
<blockquote>
<p>user:1000:name</p>
<p>user:1000:reply.to</p>
</blockquote>
</blockquote>
<h2 id="公共方法"><a href="#公共方法" class="headerlink" title="公共方法"></a>公共方法</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看系统所有的变量</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> keys *</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 判断key值存储的类型</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> <span class="built_in">type</span> name</span></span><br><span class="line">&quot;string&quot;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 判断key是否存在，1：存在； 0：不存在</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> exists name</span></span><br><span class="line">(integer) 1</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> exists nokey</span></span><br><span class="line">(integer) 0</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除key</span></span><br><span class="line">del deldemo</span><br><span class="line">(integer) 1</span><br><span class="line">del deldemo</span><br><span class="line">(integer) 0</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="其他命令备忘"><a href="#其他命令备忘" class="headerlink" title="其他命令备忘"></a>其他命令备忘</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1、redis-cli执行命令报错,可以用auth命令输入密码</span></span><br><span class="line">(error) NOAUTH Authentication required.</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> auth passowrd</span></span><br><span class="line">OK</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2、返回所有连接到服务器的客户端信息和统计数据</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> client list</span></span><br><span class="line">id=42661 addr=127.0.0.1:36864 fd=12 name= age=201 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=26 qbuf-free=32742 obl=0 oll=0 omem=0 events=r cmd=client</span><br><span class="line">id=42660 addr=10.1.*.22:45290 fd=10 name= age=226 idle=10 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=select</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3、显示所有redis配置信息</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> info</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Server</span></span><br><span class="line">redis_version:5.0.5</span><br><span class="line">redis_git_sha1:00000000</span><br><span class="line">executable:/usr/local/redis/bin/redis-server</span><br><span class="line">config_file:/etc/redis/6379.conf</span><br><span class="line"><span class="meta">#</span><span class="bash"> Clients</span></span><br><span class="line">connected_clients:7</span><br><span class="line">client_recent_max_input_buffer:2</span><br><span class="line"><span class="meta">#</span><span class="bash"> Memory</span></span><br><span class="line">used_memory:1032400</span><br><span class="line">used_memory_human:1008.20K</span><br><span class="line"><span class="meta">#</span><span class="bash"> Persistence</span></span><br><span class="line">loading:0</span><br><span class="line">rdb_changes_since_last_save:328</span><br><span class="line"><span class="meta">#</span><span class="bash"> Stats</span></span><br><span class="line">total_connections_received:42670</span><br><span class="line">total_commands_processed:5904618</span><br><span class="line"><span class="meta">#</span><span class="bash"> Replication</span></span><br><span class="line">role:master</span><br><span class="line">connected_slaves:0</span><br><span class="line"><span class="meta">#</span><span class="bash"> CPU</span></span><br><span class="line">used_cpu_sys:2300.225530</span><br><span class="line">used_cpu_user:3141.746346</span><br><span class="line"><span class="meta">#</span><span class="bash"> Cluster</span></span><br><span class="line">cluster_enabled:0</span><br><span class="line"><span class="meta">#</span><span class="bash"> Keyspace</span></span><br><span class="line">db0:keys=8,expires=7,avg_ttl=2143172852155</span><br><span class="line">db6:keys=241,expires=238,avg_ttl=926857</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 4、选择数据库（默认0~15一共16个数据库）</span></span><br><span class="line">127.0.0.1:6379&gt; select 16</span><br><span class="line">(error) ERR DB index is out of range</span><br><span class="line">127.0.0.1:6379&gt; select 15</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379[15]&gt; select 0</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; </span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 5、redis清库</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 清除当前库</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> flushdb</span> </span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; keys *</span><br><span class="line">(empty list or set)</span><br><span class="line"><span class="meta">#</span><span class="bash"> 清除所有库</span></span><br><span class="line">flushall</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="String类型"><a href="#String类型" class="headerlink" title="String类型"></a>String类型</h2><h3 id="设置字符串的值"><a href="#设置字符串的值" class="headerlink" title="设置字符串的值"></a>设置字符串的值</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 设置值</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> <span class="built_in">set</span> name <span class="string">&quot;kk&quot;</span></span></span><br><span class="line">OK</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> get name</span></span><br><span class="line">&quot;kk&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash"> 一条命令设置多个值</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> mset age 3 birth 2010/01/01</span></span><br><span class="line">OK</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> mget age birth</span></span><br><span class="line">1) &quot;3&quot;</span><br><span class="line">2) &quot;2010/01/01&quot;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 现有的key尾部追加值</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> append name <span class="string">&quot; lee&quot;</span></span></span><br><span class="line">6 # 返回追加值之后key的长度[kk] + [ lee] = 6</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> get name</span></span><br><span class="line">&quot;kk lee&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash"> 得到值长度</span></span><br><span class="line">strlen name</span><br><span class="line">(integer) 6</span><br></pre></td></tr></table></figure>

<h3 id="数据在限定时间存活"><a href="#数据在限定时间存活" class="headerlink" title="数据在限定时间存活"></a>数据在限定时间存活</h3><p>方法1：对存在的key设置过期时间</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> <span class="built_in">set</span> phone 110</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 10s后删除phone</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> expire 10</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 过期后get key的值为nil</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> get phone</span></span><br><span class="line">(nil)</span><br></pre></td></tr></table></figure>

<p>方法2：设置值时同时指定过期时间</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> <span class="built_in">set</span> phone 110 ex 10</span></span><br><span class="line">OK</span><br></pre></td></tr></table></figure>

<p>公共方法</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 得到剩余存活时间</span> </span><br><span class="line">ttl phone</span><br><span class="line">(integer) 5 # 剩余秒数</span><br><span class="line">(integer) -2 # 已经过期</span><br><span class="line">(integer) -1 # key无过期时间，是永久的</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 取消过期设定</span></span><br><span class="line">persist phone</span><br><span class="line">(integer) 1 # 设置成功</span><br><span class="line">persist phone</span><br><span class="line">(integer) 0 # phone这个key原来就是永久的</span><br></pre></td></tr></table></figure>

<h3 id="原子递增减，重置"><a href="#原子递增减，重置" class="headerlink" title="原子递增减，重置"></a>原子递增减，重置</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 原子递增</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> incr age</span></span><br><span class="line">(integer) 4</span><br><span class="line"><span class="meta">#</span><span class="bash"> 指定增加多少</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> incrby age 10</span></span><br><span class="line">(integer) 14</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 同理原子递减</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> decr age</span></span><br><span class="line">(integer) 13</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> decrby age 14</span></span><br><span class="line">(integer) -1</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 数值重置，且返回重置前的值</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> getset age 3</span></span><br><span class="line">&quot;-1&quot;</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> get age</span></span><br><span class="line">&quot;3&quot;</span><br></pre></td></tr></table></figure>
<h3 id="其他补遗"><a href="#其他补遗" class="headerlink" title="其他补遗"></a>其他补遗</h3><p>decrby age -2 = incrby age 2</p>
<p># 增加浮点数</p>
<p>incrbyfloat  price 2.122  </p>
<p>位操作</p>
<p>getbit key offset</p>
<p>setbit key offset value</p>
<p>bitcount key [start][end]</p>
<p>bitop operation destkey key[key …]</p>
<h2 id="List类型"><a href="#List类型" class="headerlink" title="List类型"></a>List类型</h2><p>一般意义上讲列表就是<strong>有序</strong>元素的序列，数组实现跟列表实现的list，属性方面大不相同</p>
<p>列表list：头尾添加元素速度极快且相同，跟list到底有多少值无关</p>
<p>数组list：索引访问元素速度极快</p>
<p>Redis的列表类型（list）可以存储一个<strong>有序</strong>的字符串列表，通常的操作是向列表两端添加元素，或者获取列表的某一个片段。其内部使用双向链表（double linked list）实现的，所以两端添加元素的时间复杂度是O(1)，获取越接近两端元素的速度就越快。快速访问集合元素能力不行</p>
<h3 id="设置List值"><a href="#设置List值" class="headerlink" title="设置List值"></a>设置List值</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> rpush向右侧末尾添加元素，显示添加后的list数量</span></span><br><span class="line">rpush list 0 1 2 3 4 5</span><br><span class="line">(integer) 6</span><br><span class="line"><span class="meta">#</span><span class="bash"> 显示0~2共3个位置的元素，注意list只有一个lrange用于显示list值，没有rrange</span></span><br><span class="line">lrange list 0 2</span><br><span class="line">1) &quot;0&quot;</span><br><span class="line">2) &quot;1&quot;</span><br><span class="line">3) &quot;2&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash"> -1代表最后一个元素</span></span><br><span class="line">lrange list 0 -1</span><br><span class="line">1) &quot;0&quot;</span><br><span class="line">2) &quot;1&quot;</span><br><span class="line">3) &quot;2&quot;</span><br><span class="line">4) &quot;3&quot;</span><br><span class="line">5) &quot;4&quot;</span><br><span class="line">6) &quot;5&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash"> 右侧末尾弹出1个元素，返回弹出的元素值</span></span><br><span class="line">rpop list</span><br><span class="line">&quot;5&quot;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 左侧头部添加元素</span></span><br><span class="line">lpush list a b c d</span><br><span class="line">lrange list 0 -1</span><br><span class="line"> 1) &quot;d&quot;</span><br><span class="line"> 2) &quot;c&quot;</span><br><span class="line"> 3) &quot;b&quot;</span><br><span class="line"> 4) &quot;a&quot;</span><br><span class="line"> 5) &quot;0&quot;</span><br><span class="line"> 6) &quot;1&quot;</span><br><span class="line"> 7) &quot;2&quot;</span><br><span class="line"> 8) &quot;3&quot;</span><br><span class="line"> 9) &quot;4&quot;</span><br><span class="line"><span class="meta"> </span></span><br><span class="line"><span class="meta"> #</span><span class="bash"> 左侧头部弹出1个元素，返回被弹出的元素值</span></span><br><span class="line">lpop list</span><br><span class="line">&quot;d&quot;</span><br><span class="line">lrange list 0 -1</span><br><span class="line">1) &quot;c&quot;</span><br><span class="line">2) &quot;b&quot;</span><br><span class="line">3) &quot;a&quot;</span><br><span class="line">4) &quot;0&quot;</span><br><span class="line">5) &quot;1&quot;</span><br><span class="line">6) &quot;2&quot;</span><br><span class="line">7) &quot;3&quot;</span><br><span class="line">8) &quot;4&quot;</span><br></pre></td></tr></table></figure>

<h3 id="异常情况"><a href="#异常情况" class="headerlink" title="异常情况"></a>异常情况</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 一个list一直弹，最后无元素可弹时，返回nil，且此时删除该键</span></span><br><span class="line">rpop poplist</span><br><span class="line">(nil)</span><br><span class="line">exists poplist</span><br><span class="line">(integer) 0</span><br></pre></td></tr></table></figure>

<h3 id="列表常用命令"><a href="#列表常用命令" class="headerlink" title="列表常用命令"></a>列表常用命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">rpush mylist 1 2 3 4 5 </span><br><span class="line">(integer) 5</span><br><span class="line"><span class="meta">#</span><span class="bash"> 列表截取</span></span><br><span class="line">127.0.0.1:6379&gt; ltrim mylist 0 2</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; lrange mylist 0 -1</span><br><span class="line">1) &quot;1&quot;</span><br><span class="line">2) &quot;2&quot;</span><br><span class="line">3) &quot;3&quot;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 设置某个值的数据</span></span><br><span class="line">127.0.0.1:6379&gt; lset mylist 0 11</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; lrange mylist 0 -1</span><br><span class="line">1) &quot;11&quot;</span><br><span class="line">2) &quot;2&quot;</span><br><span class="line">3) &quot;3&quot;</span><br><span class="line">127.0.0.1:6379&gt; lset mylist -1 33</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; lrange mylist 0 -1</span><br><span class="line">1) &quot;11&quot;</span><br><span class="line">2) &quot;2&quot;</span><br><span class="line">3) &quot;33&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash"> 列表长度</span></span><br><span class="line">127.0.0.1:6379&gt; llen mylist</span><br><span class="line">(integer) 3</span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除列表值为2的元素；0 ：删除所有；</span></span><br><span class="line">127.0.0.1:6379&gt; lrem mylist 0 2</span><br><span class="line">(integer) 1</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>移除source列表最后一个元素，插入destination列表头部</p>
<blockquote>
<p>rpoplpush source destination</p>
<p>brpoplpush source destination timeout # 阻塞版，0：代表无限期阻塞</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 示例</span></span><br><span class="line">del list1 list2</span><br><span class="line">(integer) 2</span><br><span class="line">rpush list1 1 2 3 4</span><br><span class="line">(integer) 4</span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果目标list不存在的话会创建一个</span></span><br><span class="line">rpoplpush list1 list2</span><br><span class="line">&quot;4&quot;</span><br><span class="line">keys list*</span><br><span class="line">1) &quot;list1&quot;</span><br><span class="line">2) &quot;list2&quot;</span><br><span class="line">lrange list2 0 -1</span><br><span class="line">1) &quot;4&quot;</span><br><span class="line">lrange list1 0 -1</span><br><span class="line">1) &quot;1&quot;</span><br><span class="line">2) &quot;2&quot;</span><br><span class="line">3) &quot;3&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果源list不存在返回nil</span></span><br><span class="line">rpoplpush list3 list1</span><br><span class="line">(nil)</span><br><span class="line"><span class="meta">#</span><span class="bash"> 只有rpoplpush，即弹出源末尾值插入目标头部</span></span><br><span class="line">lpoprpush list2 list1</span><br><span class="line">(error) ERR unknown command &#x27;lpoprpush&#x27;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 源跟目标都有值时可以更明显看出</span></span><br><span class="line">127.0.0.1:6379&gt; lrange list1 0 -1</span><br><span class="line">1) &quot;1&quot;</span><br><span class="line">2) &quot;2&quot;</span><br><span class="line">3) &quot;3&quot;</span><br><span class="line"></span><br><span class="line">127.0.0.1:6379&gt; lrange list2 0 -1</span><br><span class="line">1) &quot;a&quot;</span><br><span class="line">2) &quot;b&quot;</span><br><span class="line">3) &quot;c&quot;</span><br><span class="line">4) &quot;d&quot;</span><br><span class="line"></span><br><span class="line">127.0.0.1:6379&gt; rpoplpush list1 list2</span><br><span class="line">&quot;3&quot;</span><br><span class="line">127.0.0.1:6379&gt; lrange list1 0 -1</span><br><span class="line">1) &quot;1&quot;</span><br><span class="line">2) &quot;2&quot;</span><br><span class="line">127.0.0.1:6379&gt; lrange list2 0 -1</span><br><span class="line">1) &quot;3&quot;</span><br><span class="line">2) &quot;a&quot;</span><br><span class="line">3) &quot;b&quot;</span><br><span class="line">4) &quot;c&quot;</span><br><span class="line">5) &quot;d&quot;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 源跟目标一样时末尾元素移到头部，旋转列表</span></span><br><span class="line">127.0.0.1:6379&gt; rpoplpush list2 list2</span><br><span class="line">&quot;d&quot;</span><br><span class="line">127.0.0.1:6379&gt; lrange list2 0 -1</span><br><span class="line">1) &quot;d&quot;</span><br><span class="line">2) &quot;3&quot;</span><br><span class="line">3) &quot;a&quot;</span><br><span class="line">4) &quot;b&quot;</span><br><span class="line">5) &quot;c&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="Hash类型"><a href="#Hash类型" class="headerlink" title="Hash类型"></a>Hash类型</h2><p>Redis Hset 命令用于为哈希表中的字段赋值 。</p>
<p>如果哈希表不存在，一个新的哈希表被创建并进行 HSET 操作。</p>
<p>如果字段已经存在于哈希表中，旧值将被覆盖。</p>
<h3 id="返回值"><a href="#返回值" class="headerlink" title="返回值"></a>返回值</h3><p>如果字段是哈希表中的一个新建字段，并且值设置成功，返回 1 。 如果哈希表中域字段已经存在且旧值已被新值覆盖，返回 0 。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">HSET KEY_NAME FIELD VALUE</span><br><span class="line">HGET KEY_NAME FIELD</span><br></pre></td></tr></table></figure>

<p>举例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hset website google &quot;google.com&quot;</span><br><span class="line">hset website baidu &quot;baidu.com&quot;</span><br><span class="line"></span><br><span class="line">hget website google</span><br><span class="line">hgetall website</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>









<hr>
<p>2017-05-23 23:15 更新列表list命令用法，困了:-s睡觉去</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2017/05/10/redis_abc/" data-id="ckwzsyx3g0001soeh3jnk2sqc" data-title="redis入门" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/redis/" rel="tag">redis</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%85%A5%E9%97%A8/" rel="tag">入门</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%9F%BA%E7%A1%80/" rel="tag">基础</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2021/12/09/hello-world/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Hello World
        
      </div>
    </a>
  
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/" rel="tag">redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%A5%E9%97%A8/" rel="tag">入门</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9F%BA%E7%A1%80/" rel="tag">基础</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/redis/" style="font-size: 10px;">redis</a> <a href="/tags/%E5%85%A5%E9%97%A8/" style="font-size: 10px;">入门</a> <a href="/tags/%E5%9F%BA%E7%A1%80/" style="font-size: 10px;">基础</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/12/09/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2017/05/10/redis_abc/">redis入门</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>